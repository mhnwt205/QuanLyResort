@{
    Layout = "~/Areas/Customer/Views/Shared/_CustomerLayout.cshtml";
    ViewData["Title"] = "Đăng nhập";
}

<div class="container" style="max-width:720px;margin-top:40px;margin-bottom:40px;">
    <div class="card shadow-sm">
        <div class="card-body p-4">
            <div class="text-center mb-4">
                <i class="fas fa-sign-in-alt" style="font-size: 48px; color: #4CAF50;"></i>
                <h2 class="mt-3">Đăng nhập</h2>
                <p class="text-muted">Đăng nhập để quản lý đặt phòng của bạn</p>
            </div>

    @if (!ViewData.ModelState.IsValid)
    {
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            @Html.ValidationSummary(false)
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            <i class="fas fa-check-circle"></i> @TempData["SuccessMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }

            <form asp-action="Login" method="post" id="loginForm">
                <div class="form-group mb-3">
                    <label for="username" class="form-label">
                        <i class="fas fa-envelope"></i> Email hoặc Tài khoản
                    </label>
                    <input 
                        type="text" 
                        class="form-control form-control-lg" 
                        name="username" 
                        id="username" 
                        placeholder="Nhập email đã đăng ký" 
                        autocomplete="username"
                        required>
                </div>
                <div class="form-group mb-4">
                    <label for="password" class="form-label">
                        <i class="fas fa-lock"></i> Mật khẩu
                    </label>
                    <div class="input-group">
                        <input 
                            type="password" 
                            class="form-control form-control-lg" 
                            name="password" 
                            id="password" 
                            placeholder="Nhập mật khẩu" 
                            autocomplete="current-password"
                            required>
                        <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                            <i class="fas fa-eye" id="toggleIcon"></i>
                        </button>
                    </div>
                </div>

                <div class="d-grid gap-2 mb-3">
                    <button type="submit" class="btn btn-primary btn-lg" id="submitBtn">
                        <i class="fas fa-sign-in-alt"></i> Đăng nhập
                    </button>
                </div>

                <div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
                    <a class="btn btn-outline-secondary" href='@Url.Action("Register","Account")'>
                        <i class="fas fa-user-plus"></i> Đăng ký tài khoản
                    </a>
                    <a class="btn btn-link" href='@Url.Action("ForgotPassword","Account")'>
                        <i class="fas fa-key"></i> Quên mật khẩu?
                    </a>
                </div>
            </form>

            <hr class="my-4">

            <div class="text-center">
                <small class="text-muted">
                    <i class="fas fa-info-circle"></i> 
                    Chưa có tài khoản? <a href='@Url.Action("Register","Account")'>Đăng ký ngay</a> để trải nghiệm dịch vụ
                </small>
            </div>
        </div>
    </div>
</div>

<script>
// Toggle hiển thị mật khẩu
document.getElementById('togglePassword')?.addEventListener('click', function () {
    const passwordInput = document.getElementById('password');
    const toggleIcon = document.getElementById('toggleIcon');
    
    if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        toggleIcon.classList.remove('fa-eye');
        toggleIcon.classList.add('fa-eye-slash');
    } else {
        passwordInput.type = 'password';
        toggleIcon.classList.remove('fa-eye-slash');
        toggleIcon.classList.add('fa-eye');
    }
});

// Loading state khi submit
document.getElementById('loginForm').addEventListener('submit', function() {
    const submitBtn = document.getElementById('submitBtn');
    submitBtn.disabled = true;
    submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Đang đăng nhập...';
});
</script>
