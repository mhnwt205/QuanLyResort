@model QuanLyResort.Models.Room
@{
    Layout = "_CustomerLayout";
    ViewData["Title"] = "Chi tiết phòng";
    var similarRooms = ViewBag.SimilarRooms as List<QuanLyResort.Models.Room> ?? new List<QuanLyResort.Models.Room>();
    var roomTypes = ViewBag.RoomTypes as List<QuanLyResort.Models.RoomType> ?? new List<QuanLyResort.Models.RoomType>();
}

<style>
    .room-detail-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
    }
    .room-gallery {
        position: relative;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    .main-image {
        width: 100%;
        height: 500px;
        object-fit: cover;
        transition: transform 0.3s ease;
    }
    .main-image:hover {
        transform: scale(1.05);
    }
    .thumbnail-gallery {
        display: flex;
        gap: 10px;
        margin-top: 15px;
        overflow-x: auto;
        padding: 10px 0;
    }
    .thumbnail {
        width: 100px;
        height: 80px;
        object-fit: cover;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 3px solid transparent;
    }
    .thumbnail:hover,
    .thumbnail.active {
        border-color: #667eea;
        transform: scale(1.1);
    }
    .room-info-card {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        margin-bottom: 30px;
    }
    .room-title {
        color: #2c3e50;
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 10px;
    }
    .room-type {
        color: #667eea;
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 20px;
    }
    .price-section {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 15px;
        padding: 25px;
        text-align: center;
        margin-bottom: 30px;
    }
    .price-amount {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 5px;
    }
    .price-unit {
        font-size: 1.1rem;
        opacity: 0.9;
    }
    .amenities-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin: 30px 0;
    }
    .amenity-item {
        display: flex;
        align-items: center;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 10px;
        transition: all 0.3s ease;
    }
    .amenity-item:hover {
        background: #e9ecef;
        transform: translateY(-2px);
    }
    .amenity-icon {
        width: 50px;
        height: 50px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.2rem;
        margin-right: 15px;
    }
    .booking-section {
        background: #f8f9fa;
        border-radius: 15px;
        padding: 30px;
        margin-top: 30px;
    }
    .btn-book-now {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
        padding: 15px 40px;
        font-size: 1.2rem;
        font-weight: 600;
        border-radius: 50px;
        color: white;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-block;
    }
    .btn-book-now:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        color: white;
    }
    .similar-rooms {
        margin-top: 50px;
    }
    .similar-room-card {
        background: white;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
    }
    .similar-room-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0,0,0,0.15);
    }
    .room-status {
        display: inline-block;
        padding: 5px 15px;
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: 600;
    }
    .status-available {
        background: #d4edda;
        color: #155724;
    }
    .status-occupied {
        background: #f8d7da;
        color: #721c24;
    }
    .status-maintenance {
        background: #fff3cd;
        color: #856404;
    }
</style>

<div class="room-detail-container">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/Customer">Trang chủ</a></li>
            <li class="breadcrumb-item"><a href="@Url.Action("Index", "Rooms")">Phòng</a></li>
            <li class="breadcrumb-item active">@Model.RoomNumber</li>
        </ol>
    </nav>

    <div class="row">
        <!-- Left Column - Room Gallery -->
        <div class="col-lg-8">
            <div class="room-gallery">
                <img id="mainImage" src="/deluxe-assets/images/room-1.jpg" alt="@Model.RoomNumber" class="main-image">
                
                <!-- Thumbnail Gallery -->
                <div class="thumbnail-gallery">
                    <img src="/deluxe-assets/images/room-1.jpg" alt="@Model.RoomNumber" class="thumbnail active" onclick="changeMainImage(this.src)">
                    <img src="/deluxe-assets/images/room-2.jpg" alt="Phòng 2" class="thumbnail" onclick="changeMainImage(this.src)">
                    <img src="/deluxe-assets/images/room-3.jpg" alt="Phòng 3" class="thumbnail" onclick="changeMainImage(this.src)">
                    <img src="/deluxe-assets/images/room-4.jpg" alt="Phòng 4" class="thumbnail" onclick="changeMainImage(this.src)">
                    <img src="/deluxe-assets/images/room-5.jpg" alt="Phòng 5" class="thumbnail" onclick="changeMainImage(this.src)">
                </div>
            </div>
        </div>

        <!-- Right Column - Room Info & Booking -->
        <div class="col-lg-4">
            <div class="room-info-card">
                <h1 class="room-title">@Model.RoomNumber</h1>
                <p class="room-type">@Model.RoomType?.TypeName</p>
                
                <div class="mb-3">
                    <span class="room-status @(Model.Status == "available" ? "status-available" : Model.Status == "occupied" ? "status-occupied" : "status-maintenance")">
                        @(Model.Status == "available" ? "Có sẵn" : Model.Status == "occupied" ? "Đã đặt" : "Bảo trì")
                    </span>
                </div>

                <div class="price-section">
                    <div class="price-amount">@(Model.RoomType?.BasePrice.ToString("N0"))₫</div>
                    <div class="price-unit">mỗi đêm</div>
                </div>

                <div class="booking-section">
                    <h5 class="mb-3"><i class="fas fa-calendar-check me-2"></i>Đặt phòng ngay</h5>
                    <p class="text-muted mb-4">Trải nghiệm nghỉ dưỡng tuyệt vời tại @Model.RoomNumber</p>
                    <a href="@Url.Action("Book", "OnlineBooking", new { roomId = Model.RoomId })" class="btn-book-now w-100 text-center">
                        <i class="fas fa-bed me-2"></i>Đặt phòng ngay
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Room Details -->
    <div class="room-info-card">
        <h3 class="mb-4"><i class="fas fa-info-circle me-2"></i>Thông tin chi tiết</h3>
        <div class="row">
            <div class="col-md-6">
                <h5>Thông tin cơ bản</h5>
                <ul class="list-unstyled">
                    <li class="mb-2"><i class="fas fa-bed me-2 text-primary"></i><strong>Loại phòng:</strong> @Model.RoomType?.TypeName</li>
                    <li class="mb-2"><i class="fas fa-users me-2 text-primary"></i><strong>Sức chứa:</strong> @Model.RoomType?.MaxOccupancy người</li>
                    <li class="mb-2"><i class="fas fa-expand-arrows-alt me-2 text-primary"></i><strong>Diện tích:</strong> 25 m²</li>
                    <li class="mb-2"><i class="fas fa-money-bill-wave me-2 text-primary"></i><strong>Giá:</strong> @(Model.RoomType?.BasePrice.ToString("N0"))₫/đêm</li>
                </ul>
            </div>
            <div class="col-md-6">
                <h5>Mô tả</h5>
                <p class="text-muted">@(string.IsNullOrEmpty(Model.Description) ? "Phòng được thiết kế hiện đại với đầy đủ tiện nghi, mang đến trải nghiệm nghỉ dưỡng tuyệt vời cho quý khách." : Model.Description)</p>
            </div>
        </div>
    </div>

    <!-- Amenities -->
    <div class="room-info-card">
        <h3 class="mb-4"><i class="fas fa-star me-2"></i>Tiện ích & Dịch vụ</h3>
        <div class="amenities-grid">
            <div class="amenity-item">
                <div class="amenity-icon">
                    <i class="fas fa-wifi"></i>
                </div>
                <div>
                    <h6 class="mb-1">WiFi miễn phí</h6>
                    <small class="text-muted">Kết nối internet tốc độ cao</small>
                </div>
            </div>
            <div class="amenity-item">
                <div class="amenity-icon">
                    <i class="fas fa-tv"></i>
                </div>
                <div>
                    <h6 class="mb-1">TV màn hình phẳng</h6>
                    <small class="text-muted">Smart TV 55 inch với Netflix</small>
                </div>
            </div>
            <div class="amenity-item">
                <div class="amenity-icon">
                    <i class="fas fa-snowflake"></i>
                </div>
                <div>
                    <h6 class="mb-1">Điều hòa</h6>
                    <small class="text-muted">Hệ thống điều hòa hiện đại</small>
                </div>
            </div>
            <div class="amenity-item">
                <div class="amenity-icon">
                    <i class="fas fa-shower"></i>
                </div>
                <div>
                    <h6 class="mb-1">Phòng tắm riêng</h6>
                    <small class="text-muted">Bồn tắm và vòi sen</small>
                </div>
            </div>
            <div class="amenity-item">
                <div class="amenity-icon">
                    <i class="fas fa-coffee"></i>
                </div>
                <div>
                    <h6 class="mb-1">Mini bar</h6>
                    <small class="text-muted">Đồ uống và snack</small>
                </div>
            </div>
            <div class="amenity-item">
                <div class="amenity-icon">
                    <i class="fas fa-phone"></i>
                </div>
                <div>
                    <h6 class="mb-1">Dịch vụ 24/7</h6>
                    <small class="text-muted">Hỗ trợ khách hàng mọi lúc</small>
                </div>
            </div>
            <div class="amenity-item">
                <div class="amenity-icon">
                    <i class="fas fa-car"></i>
                </div>
                <div>
                    <h6 class="mb-1">Bãi đỗ xe</h6>
                    <small class="text-muted">Miễn phí cho khách lưu trú</small>
                </div>
            </div>
            <div class="amenity-item">
                <div class="amenity-icon">
                    <i class="fas fa-utensils"></i>
                </div>
                <div>
                    <h6 class="mb-1">Phục vụ phòng</h6>
                    <small class="text-muted">Dịch vụ ăn uống tại phòng</small>
                </div>
            </div>
        </div>
    </div>

    <!-- Similar Rooms -->
    @if (similarRooms.Any())
    {
        <div class="similar-rooms">
            <h3 class="mb-4"><i class="fas fa-bed me-2"></i>Phòng tương tự</h3>
            <div class="row">
                @foreach (var similarRoom in similarRooms)
                {
                    <div class="col-md-4 mb-4">
                        <div class="similar-room-card">
                            <img src="/deluxe-assets/images/room-1.jpg" alt="@similarRoom.RoomNumber" class="img-fluid" style="height: 200px; width: 100%; object-fit: cover;">
                            <div class="p-3">
                                <h5 class="mb-2">@similarRoom.RoomNumber</h5>
                                <p class="text-muted mb-2">@similarRoom.RoomType?.TypeName</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="text-primary font-weight-bold">@(similarRoom.RoomType?.BasePrice.ToString("N0"))₫/đêm</span>
                                    <a href="@Url.Action("Details", "Rooms", new { id = similarRoom.RoomId })" class="btn btn-outline-primary btn-sm">Xem chi tiết</a>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    }
</div>

<script>
function changeMainImage(src) {
    // Update main image
    document.getElementById('mainImage').src = src;
    
    // Update active thumbnail
    document.querySelectorAll('.thumbnail').forEach(thumb => {
        thumb.classList.remove('active');
    });
    event.target.classList.add('active');
}

// Smooth scroll for anchor links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});
</script>
